---
phase: 01-prerequisites
plan: 03
type: execute
wave: 2
depends_on:
  - "01-01"
files_modified:
  - components/layout/Screen.tsx
  - components/layout/ScrollScreen.tsx
  - app/(tabs)/index.tsx
  - app/(tabs)/browse.tsx
  - app/(tabs)/cart.tsx
  - app/(tabs)/favorites.tsx
  - app/(tabs)/profile.tsx
  - app/product/[id].tsx
  - app/blog/index.tsx
  - app/blog/[id].tsx
  - app/maker/[id].tsx
  - app/checkout.tsx
  - app/about.tsx
  - app/faq.tsx
autonomous: true
requirements:
  - PLAT-02

must_haves:
  truths:
    - "Every screen uses SafeAreaView from react-native-safe-area-context — no screen clips behind a notch or browser chrome"
    - "Every screen has a parchment background (#F5EDD6) by default — no screen shows white or system background"
    - "No screen imports SafeAreaView from 'react-native' (the wrong deprecated package)"
    - "Screen and ScrollScreen components exist and are the standard layout wrapper for all current and future screens"
  artifacts:
    - path: "components/layout/Screen.tsx"
      provides: "Base screen layout with correct SafeAreaView and parchment background"
      exports: ["default Screen"]
      min_lines: 25
    - path: "components/layout/ScrollScreen.tsx"
      provides: "Scrollable screen layout variant"
      exports: ["default ScrollScreen"]
      min_lines: 35
  key_links:
    - from: "components/layout/Screen.tsx"
      to: "react-native-safe-area-context"
      via: "named import SafeAreaView"
      pattern: "from 'react-native-safe-area-context'"
    - from: "app/(tabs)/index.tsx"
      to: "components/layout/ScrollScreen"
      via: "import and wrapping root element"
      pattern: "ScrollScreen"
    - from: "app/(tabs)/browse.tsx"
      to: "components/layout/Screen"
      via: "import and wrapping root element"
      pattern: "Screen"
---

<objective>
Create Screen and ScrollScreen layout components, then update all 12 existing screens to use them.

Purpose: `app/(tabs)/index.tsx` currently imports `SafeAreaView` from `react-native` (deprecated, broken on web — clips content behind browser chrome). All other 11 screens are plain stub `<View>` components with no safe area handling and no parchment background enforcement. The `Screen` and `ScrollScreen` components make correct behavior the default — future phases get SafeAreaView and parchment background for free.

Output: Two new components in `components/layout/`, and all 12 screen files updated to use them as their root element.
</objective>

<execution_context>
@/Users/jamesputman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jamesputman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/01-prerequisites/01-RESEARCH.md
@.planning/phases/01-prerequisites/01-01-SUMMARY.md
@constants/theme.ts
@app/(tabs)/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Screen and ScrollScreen layout components</name>
  <files>
    components/layout/Screen.tsx
    components/layout/ScrollScreen.tsx
  </files>
  <action>
Create `components/layout/Screen.tsx` and `components/layout/ScrollScreen.tsx`. The `components/layout/` directory was created in Plan 01 (FontErrorScreen). If it doesn't exist yet, create it.

**Screen.tsx:**
```tsx
/**
 * Screen — Base layout wrapper for all Wildenflower screens.
 *
 * Enforces:
 * - SafeAreaView from react-native-safe-area-context (NOT react-native)
 * - Parchment background (colors.parchment) by default
 *
 * Usage:
 *   import Screen from '../../components/layout/Screen';
 *   export default function MyScreen() {
 *     return <Screen><YourContent /></Screen>;
 *   }
 */
import React from 'react';
import { StyleSheet, ViewStyle } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { colors } from '../../constants/theme';

interface ScreenProps {
  children: React.ReactNode;
  style?: ViewStyle;
}

export default function Screen({ children, style }: ScreenProps) {
  return (
    <SafeAreaView style={[styles.safe, style]}>
      {children}
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  safe: {
    flex: 1,
    backgroundColor: colors.parchment,
  },
});
```

**ScrollScreen.tsx:**
```tsx
/**
 * ScrollScreen — Scrollable layout wrapper for Wildenflower screens.
 *
 * Enforces:
 * - SafeAreaView from react-native-safe-area-context (NOT react-native)
 * - Parchment background on both SafeAreaView and ScrollView
 * - showsVerticalScrollIndicator: false (clean look)
 * - Default bottom padding (spacing.huge = 64) for tab bar clearance
 *
 * Usage:
 *   import ScrollScreen from '../../components/layout/ScrollScreen';
 *   export default function MyScreen() {
 *     return <ScrollScreen><YourContent /></ScrollScreen>;
 *   }
 */
import React from 'react';
import { ScrollView, StyleSheet, ViewStyle } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { colors, spacing } from '../../constants/theme';

interface ScrollScreenProps {
  children: React.ReactNode;
  style?: ViewStyle;
  contentContainerStyle?: ViewStyle;
}

export default function ScrollScreen({
  children,
  style,
  contentContainerStyle,
}: ScrollScreenProps) {
  return (
    <SafeAreaView style={[styles.safe, style]}>
      <ScrollView
        style={styles.scroll}
        contentContainerStyle={[styles.content, contentContainerStyle]}
        showsVerticalScrollIndicator={false}
      >
        {children}
      </ScrollView>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  safe: {
    flex: 1,
    backgroundColor: colors.parchment,
  },
  scroll: {
    flex: 1,
    backgroundColor: colors.parchment,
  },
  content: {
    paddingBottom: spacing.huge, // 64px — clears tab bar
  },
});
```

Both components accept an optional `style` prop for overrides. ScrollScreen additionally accepts `contentContainerStyle` to override the scroll content container (useful for screens that need different padding). Neither has `overflow: 'hidden'` — that would clip SafeAreaView rendering.

Expo Router injects `SafeAreaProvider` automatically for SDK 52 — no need to add it manually in `_layout.tsx`.
  </action>
  <verify>
Both files exist: `components/layout/Screen.tsx` and `components/layout/ScrollScreen.tsx`.
Both import `SafeAreaView` from `'react-native-safe-area-context'` (not `'react-native'`).
Both apply `backgroundColor: colors.parchment` in their styles.
`npx tsc --noEmit` passes.
  </verify>
  <done>
`components/layout/Screen.tsx` and `components/layout/ScrollScreen.tsx` exist, import SafeAreaView from the correct package, and apply parchment background by default.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update all 12 screens to use Screen or ScrollScreen</name>
  <files>
    app/(tabs)/index.tsx
    app/(tabs)/browse.tsx
    app/(tabs)/cart.tsx
    app/(tabs)/favorites.tsx
    app/(tabs)/profile.tsx
    app/product/[id].tsx
    app/blog/index.tsx
    app/blog/[id].tsx
    app/maker/[id].tsx
    app/checkout.tsx
    app/about.tsx
    app/faq.tsx
  </files>
  <action>
Update all 12 screen files to use `Screen` or `ScrollScreen` as the root layout element. Read each file before editing to understand its current structure.

**Which wrapper to use per screen (from research audit):**

| Screen file | Wrapper | Reason |
|-------------|---------|--------|
| `app/(tabs)/index.tsx` | `ScrollScreen` | Currently has ScrollView inside SafeAreaView — consolidate |
| `app/(tabs)/browse.tsx` | `Screen` | Stub View — will have internal scroll in Phase 6 |
| `app/(tabs)/cart.tsx` | `Screen` | Stub View — will have internal scroll in Phase 7 |
| `app/(tabs)/favorites.tsx` | `Screen` | Stub View — will have internal scroll in Phase 8 |
| `app/(tabs)/profile.tsx` | `Screen` | Stub View — will have internal scroll in Phase 8 |
| `app/product/[id].tsx` | `Screen` | Stub View |
| `app/blog/index.tsx` | `Screen` | Stub View |
| `app/blog/[id].tsx` | `ScrollScreen` | Article content — will be long-form scrollable |
| `app/maker/[id].tsx` | `Screen` | Stub View |
| `app/checkout.tsx` | `ScrollScreen` | Multi-step form — will be scrollable in Phase 7 |
| `app/about.tsx` | `ScrollScreen` | Long-form content — will be scrollable in Phase 9 |
| `app/faq.tsx` | `ScrollScreen` | Accordion list — will be scrollable in Phase 9 |

**For each file, make these changes:**

1. Remove any existing `SafeAreaView` import (especially `import { SafeAreaView, ... } from 'react-native'` in `index.tsx`)
2. Remove any existing `ScrollView` import if the screen is switching to `ScrollScreen` and ScrollView is no longer needed directly
3. Add the import for the chosen wrapper: `import Screen from '../../components/layout/Screen';` or `import ScrollScreen from '../../components/layout/ScrollScreen';` (adjust relative path depth as needed)
4. Replace the outermost `<View ...>` or `<SafeAreaView ...>` with `<Screen>` or `<ScrollScreen>`
5. For `app/(tabs)/index.tsx` specifically: the current code has `<SafeAreaView><ScrollView>content</ScrollView></SafeAreaView>` — replace both with `<ScrollScreen>content</ScrollScreen>` (remove the intermediate ScrollView and SafeAreaView, keep all inner content intact)
6. Remove any now-unused style entries that were on the old outermost View (e.g., `container: { flex: 1, backgroundColor: ... }`) if they duplicate what Screen/ScrollScreen provides

**Path depth for imports:**
- `app/(tabs)/*.tsx` → `'../../components/layout/Screen'`
- `app/product/[id].tsx`, `app/blog/index.tsx`, `app/blog/[id].tsx`, `app/maker/[id].tsx`, `app/checkout.tsx`, `app/about.tsx`, `app/faq.tsx` → `'../components/layout/Screen'`

**Preserve all existing content:** Only change the outermost wrapper element and its import. Do not modify any inner components, logic, styles, or placeholder content in stub screens.

**For stub screens** (browse, cart, favorites, profile, product/[id], blog/index, maker/[id]): They typically look like:
```tsx
export default function BrowseScreen() {
  return (
    <View style={styles.container}>
      <Text>Browse</Text>
    </View>
  );
}
const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: colors.parchment },
});
```
Replace `<View style={styles.container}>` with `<Screen>` and remove the now-redundant `container` style from StyleSheet. If other styles exist, keep them. If StyleSheet becomes empty after removing `container`, remove the StyleSheet import and `const styles` declaration too.
  </action>
  <verify>
Run: `grep -r "from 'react-native'" app/ | grep "SafeAreaView"` — should return nothing (no remaining wrong-package SafeAreaView imports).
Run: `grep -r "ScrollScreen\|from.*layout/Screen" app/` — should show the 12 updated files.
`npx tsc --noEmit` passes.
  </verify>
  <done>
All 12 screen files use `Screen` or `ScrollScreen` as their root element. No file imports `SafeAreaView` from `react-native`. TypeScript check passes.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` — no new TypeScript errors.
2. `grep -rn "from 'react-native'" app/ | grep SafeAreaView` — returns nothing (no wrong imports remain).
3. `grep -rn "import Screen\|import ScrollScreen" app/` — returns results for all 12 screen files.
4. Inspect `components/layout/Screen.tsx` and `ScrollScreen.tsx` — both import SafeAreaView from `'react-native-safe-area-context'`.
</verification>

<success_criteria>
- `components/layout/Screen.tsx` and `components/layout/ScrollScreen.tsx` exist with correct SafeAreaView and parchment background
- All 12 screens use Screen or ScrollScreen as their root element
- Zero screens import SafeAreaView from `react-native` (the wrong package)
- PLAT-02 requirement addressed: SafeAreaView from react-native-safe-area-context on all screens
</success_criteria>

<output>
After completion, create `.planning/phases/01-prerequisites/01-03-SUMMARY.md`
</output>
