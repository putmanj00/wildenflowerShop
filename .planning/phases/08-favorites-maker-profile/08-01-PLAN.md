---
phase: 08-favorites-maker-profile
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - context/FavoritesContext.tsx
  - data/mock-data.ts
autonomous: true
requirements: [COMM-05]

must_haves:
  truths:
    - "FavoritesContext stores FavoriteSnapshot objects (id, handle, title, imageUrl, price, currencyCode, vendor) persisted to AsyncStorage key 'wildenflower_favorites'"
    - "Favorites survive app restart — removing the app from memory and reopening restores the saved list"
    - "isFavorite(id) returns correct boolean; toggleFavorite(snapshot) adds or removes by id"
    - "mock-data.ts has an 'Ashley Sifford' maker entry with bio, location, and specialties"
  artifacts:
    - path: "context/FavoritesContext.tsx"
      provides: "Upgraded FavoritesContext with AsyncStorage persistence"
    - path: "data/mock-data.ts"
      provides: "Updated mock-data with Ashley Sifford maker entry"
  key_links:
    - from: "FavoritesContext.favorites"
      to: "AsyncStorage"
      via: "AsyncStorage.getItem('wildenflower_favorites') — JSON.parse array of FavoriteSnapshot"
      pattern: "snapshot-persistence"
---

<objective>
Upgrade FavoritesContext from memory-only to AsyncStorage-persisted snapshot storage, and add Ashley Sifford to mock-data as the canonical maker profile.

These are the foundational changes all other Phase 8 plans depend on.
</objective>

<execution_context>
@/Users/jamesputman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jamesputman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@context/FavoritesContext.tsx
@data/mock-data.ts
@context/CartContext.tsx
</context>

<tasks>

<task type="execute" id="08-01-T1">
  <name>Upgrade FavoritesContext — add FavoriteSnapshot type and AsyncStorage persistence</name>
  <what>
Replace the memory-only `favorites: string[]` state with `favorites: FavoriteSnapshot[]` persisted to AsyncStorage. Follow the same snapshot + persist pattern as CartContext.

FavoriteSnapshot type (add to the file or export from types/shopify.ts):
```typescript
export interface FavoriteSnapshot {
  id: string;           // Shopify product GID (e.g. "gid://shopify/Product/123")
  handle: string;       // product handle for navigation (e.g. "silk-scarf")
  title: string;
  imageUrl: string | null;
  price: string;        // formatted amount, e.g. "52.00"
  currencyCode: string; // e.g. "USD"
  vendor: string;       // Shopify vendor string, e.g. "Ashley Sifford"
}
```

FavoritesContext interface changes:
- `favorites: FavoriteSnapshot[]` (was `string[]`)
- `toggleFavorite: (snapshot: FavoriteSnapshot) => void` (was `(productId: string) => void`)
- `isFavorite: (productId: string) => boolean` — unchanged signature, now looks up id in snapshot array
- Add `favoritesCount: number` computed from `favorites.length`

AsyncStorage key: `'wildenflower_favorites'`

Persist strategy (same as CartContext):
1. On mount: load from AsyncStorage, JSON.parse into `FavoriteSnapshot[]`, `setFavorites`
2. In `toggleFavorite`: compute new array, `setFavorites`, then `AsyncStorage.setItem('wildenflower_favorites', JSON.stringify(newFavorites))`
3. Handle JSON.parse errors with a try/catch, fall back to `[]`

Do NOT change the hook name (`useFavorites`) or provider name (`FavoritesProvider`).
  </what>
  <why>Phase 8 requires favorites to survive app restarts (COMM-05 SC1). All callers in 08-02 depend on this interface.</why>
  <verify>
- `npx tsc --noEmit` passes with zero errors
- FavoritesContext.tsx exports `FavoriteSnapshot` type (or it's added to types/shopify.ts)
- `favorites` field is typed as `FavoriteSnapshot[]`, not `string[]`
  </verify>
  <done>TypeScript clean; interface updated; AsyncStorage persistence implemented.</done>
</task>

<task type="execute" id="08-01-T2">
  <name>Update mock-data.ts — add Ashley Sifford maker profile</name>
  <what>
Add a new `Maker` entry to the `makers` array in `data/mock-data.ts` for Ashley Sifford — the real Shopify vendor name, which is the key used to look up profiles from the Maker Profile screen.

New maker entry:
```typescript
{
  id: 'maker-ashley',
  name: 'Ashley Sifford',
  bio: 'Hand-crafted with intention in every stitch, stone, and brushstroke. Ashley makes tie-dye, leather goods, jewelry, and original artwork — each piece a small act of devotion to the handmade life.',
  location: 'Wildenflower Studio',
  specialties: ['Artwork', 'Jewelry', 'Leatherwork', 'Tie-Dye'],
  productCount: 0,  // live count driven by Shopify
}
```

Keep all existing mock makers — they are used by `products[]` in mock-data and are referenced throughout the app.

Export a helper function from mock-data.ts for the Maker Profile screen:
```typescript
export function getMakerByVendor(vendorName: string): Maker | undefined {
  return makers.find(
    (m) => m.name.toLowerCase() === vendorName.toLowerCase()
  );
}
```
  </what>
  <why>Maker Profile screen (08-02) looks up the profile using the Shopify vendor string. "Ashley Sifford" is the real vendor name returned by live Shopify products.</why>
  <verify>
- `getMakerByVendor('Ashley Sifford')` returns the correct maker object
- `getMakerByVendor('unknown')` returns `undefined`
- `npx tsc --noEmit` passes
  </verify>
  <done>mock-data.ts exports getMakerByVendor; Ashley Sifford entry added with correct specialties.</done>
</task>

</tasks>

<verification>
`npx tsc --noEmit` passes with zero errors after both tasks.
</verification>

<success_criteria>
FavoritesContext persists FavoriteSnapshot[] to AsyncStorage. getMakerByVendor('Ashley Sifford') returns a fully-populated maker profile. All existing consumers of FavoritesContext (if any) have been updated to the new interface.
</success_criteria>

<output>
After completion, create `.planning/phases/08-favorites-maker-profile/08-01-SUMMARY.md`

Update STATE.md:
- Current Position: Phase 8 — Plan 1 of 4 complete
- Last activity: [today's date] — 08-01: FavoritesContext upgraded + mock-data updated
</output>
