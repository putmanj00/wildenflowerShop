---
phase: 08-favorites-maker-profile
plan: 02
type: execute
wave: 2
depends_on: [08-01]
files_modified:
  - app/(tabs)/browse.tsx
  - app/product/[id].tsx
  - app/maker/[id].tsx
autonomous: true
requirements: [COMM-05, CONT-01]

must_haves:
  truths:
    - "Tapping the heart on a ProductCard in Browse toggles the favorite and passes a FavoriteSnapshot to FavoritesContext"
    - "Tapping the heart on Product Detail screen toggles the favorite with the full product snapshot"
    - "Maker Profile screen renders: maker name, bio, location, specialties chips, and a live product grid for that vendor"
    - "Tapping a MakerBadge in Browse or Product Detail navigates to app/maker/[vendor-name]"
    - "Maker Profile screen renders without errors on Expo Web"
  artifacts:
    - path: "app/(tabs)/browse.tsx"
      provides: "Hearts wired to FavoritesContext; MakerBadge navigates to Maker Profile"
    - path: "app/product/[id].tsx"
      provides: "Heart toggle on Product Detail wired to FavoritesContext"
    - path: "app/maker/[id].tsx"
      provides: "Fully built Maker Profile screen"
  key_links:
    - from: "ProductCard onFavoriteToggle"
      to: "FavoritesContext.toggleFavorite"
      via: "FavoriteSnapshot built from ShopifyProduct fields"
      pattern: "snapshot-toggle"
    - from: "MakerBadge onPress"
      to: "app/maker/[id].tsx"
      via: "router.push('/maker/' + encodeURIComponent(product.vendor))"
      pattern: "vendor-navigation"
---

<objective>
Wire the heart toggles and MakerBadge navigation in Browse and Product Detail to the upgraded FavoritesContext. Build the Maker Profile screen.

This is the primary UI wiring wave — after this, tapping hearts and maker badges "works" end-to-end.
</objective>

<execution_context>
@/Users/jamesputman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jamesputman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@context/FavoritesContext.tsx
@data/mock-data.ts
@app/(tabs)/browse.tsx
@app/product/[id].tsx
@app/maker/[id].tsx
@components/MakerBadge.tsx
@constants/theme.ts
</context>

<tasks>

<task type="execute" id="08-02-T1">
  <name>Wire heart toggles and MakerBadge navigation in Browse + Product Detail</name>
  <what>
**Browse screen (app/(tabs)/browse.tsx):**
- Import `useFavorites` and `useRouter`
- For each product rendered in the product grid, build a `FavoriteSnapshot` from the Shopify product fields and pass to `ProductCard`:
  - `isFavorite={isFavorite(product.id)}`
  - `onFavoriteToggle={() => toggleFavorite({ id: product.id, handle: product.handle, title: product.title, imageUrl: product.featuredImage?.url ?? null, price: product.priceRange.minVariantPrice.amount, currencyCode: product.priceRange.minVariantPrice.currencyCode, vendor: product.vendor })}`
- Pass `onMakerPress` to `ProductCard` (see note below) OR wire `MakerBadge` directly in the card if it already accepts `onPress`.

Looking at `components/ProductCard.tsx`: `MakerBadge` is rendered at line 95 without an `onPress`. To enable navigation from Browse, modify the Browse screen to wrap the ProductCard's internal MakerBadge, OR add an `onMakerPress?: () => void` prop to ProductCard and pass it through to `MakerBadge onPress`. Use whichever approach is cleaner.

**ProductCard component update** (if needed): add optional `onMakerPress?: () => void` prop; pass it to `<MakerBadge onPress={onMakerPress} />`.

**Browse screen**: pass `onMakerPress={() => router.push('/maker/' + encodeURIComponent(product.vendor))}` to each ProductCard.

**Product Detail screen (app/product/[id].tsx):**
- Import `useFavorites` and `useRouter`
- Find where the heart/favorite toggle exists (or add one near the product title/sticky bar if absent)
- Wire heart toggle: `onPress={() => toggleFavorite({ id: product.id, handle: product.handle, title: product.title, imageUrl: product.images.nodes[0]?.url ?? null, price: product.priceRange.minVariantPrice.amount, currencyCode: product.priceRange.minVariantPrice.currencyCode, vendor: product.vendor })}`
- Wire any existing MakerBadge instance: `onPress={() => router.push('/maker/' + encodeURIComponent(product.vendor))}`
  </what>
  <why>Browse and Product Detail are the "entry points" for heart taps and maker navigation. Before this task, the heart renders but does nothing; MakerBadge shows but doesn't navigate.</why>
  <verify>
- `npx tsc --noEmit` passes
- ProductCard receives onMakerPress prop without TypeScript errors
  </verify>
  <done>Hearts in Browse and Product Detail both call toggleFavorite with a valid FavoriteSnapshot. MakerBadge in Browse navigates to /maker/[vendor].</done>
</task>

<task type="execute" id="08-02-T2">
  <name>Build Maker Profile screen — app/maker/[id].tsx</name>
  <what>
Replace the stub with a full screen. The `[id]` route param is the URL-encoded vendor name (e.g. `Ashley%20Sifford` → `Ashley Sifford`).

**Screen structure:**
1. Compact BotanicalHeader (same as Browse — `headerHeightSmall: 120`)
2. Maker avatar circle (initial letter, same style as MakerBadge.avatarCircle but larger: 72×72)
3. Maker name in terracotta heading serif (h2)
4. Location in sage italic body
5. Bio in Lora body, generous line height, earth colour
6. BotanicalDivider variant="fern-mushroom"
7. Specialties row: horizontal ScrollView of chips — `dustyRose` background, `earth` text, `radii.chip` border radius (same style as Browse FilterChips)
8. "Their Work" section heading in terracotta
9. Live product grid from Shopify — use `useProducts({ vendor: makerName })` hook if it exists (check hooks/useProducts.ts); if not, use `useProducts()` and filter client-side by `product.vendor === makerName`
10. Empty state if no products found: warm copy "Ashley's pieces are all one of a kind — check back soon."

**Data lookup:**
```typescript
import { getMakerByVendor } from '../../data/mock-data';
const { id } = useLocalSearchParams<{ id: string }>();
const makerName = decodeURIComponent(id);
const maker = getMakerByVendor(makerName);
```

If `maker` is undefined (unrecognised vendor): show a graceful fallback — just the vendor name as heading, no bio or specialties, product grid still shows.

**Navigation**: include a back button (`router.back()`) or rely on the tab bar.
  </what>
  <why>This is the Maker Profile screen — the human story behind every product. Wired to the vendor name returned by Shopify.</why>
  <verify>
- `npx tsc --noEmit` passes
- Screen file has no `TODO` placeholder left
  </verify>
  <done>app/maker/[id].tsx renders maker name, bio, location, specialties, and product grid. TypeScript clean.</done>
</task>

</tasks>

<verification>
`npx tsc --noEmit` passes with zero errors after both tasks.
</verification>

<success_criteria>
Hearts in Browse and Product Detail call toggleFavorite with full FavoriteSnapshot. MakerBadge in both locations navigates to the Maker Profile screen. Maker Profile screen renders for "Ashley Sifford" with name, bio, location, specialties, and her product grid.
</success_criteria>

<output>
After completion, create `.planning/phases/08-favorites-maker-profile/08-02-SUMMARY.md`

Update STATE.md:
- Current Position: Phase 8 — Plan 2 of 4 complete
- Last activity: [today's date] — 08-02: Hearts wired, MakerBadge navigation wired, Maker Profile screen built
</output>
