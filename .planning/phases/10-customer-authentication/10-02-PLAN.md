---
phase: 10
plan: 2
wave: 1
---

# Plan 10.2: AuthContext Creation

## Objective
Create a React Context to manage the authenticated userâ€™s state globally, allowing any screen to trigger login/logout flows and access customer data.

## Context
- .planning/REQUIREMENTS.md
- lib/auth-storage.ts
- lib/shopify-client.ts
- app/_layout.tsx

## Tasks

<task type="auto">
  <name>Create AuthContext</name>
  <files>context/AuthContext.tsx</files>
  <action>
    - Create `context/AuthContext.tsx`.
    - Export `AuthProvider` and `useAuth` hook.
    - State should include `token` (string | null), `customer` (object | null), and `isLoading` (boolean).
    - Provide `login(email, password)`, `register(email, password, firstName, lastName)`, and `logout()` methods.
    - On mount, retrieve token from `auth-storage.ts` and fetch the customer.
  </action>
  <verify>ls context/AuthContext.tsx</verify>
  <done>AuthContext is implemented with global login/logout/register state functions.</done>
</task>

<task type="auto">
  <name>Wrap App with AuthProvider</name>
  <files>app/_layout.tsx</files>
  <action>
    - Import `AuthProvider` into `app/_layout.tsx`.
    - Wrap the main application component tree (inside of or outside of CartProvider).
  </action>
  <verify>grep "AuthProvider" app/_layout.tsx</verify>
  <done>The application is wrapped in AuthProvider.</done>
</task>

## Success Criteria
- [ ] `AuthContext` provides global authentication state and methods.
- [ ] App is successfully wrapped in `AuthProvider`, enabling `useAuth()` hook in all screens.
